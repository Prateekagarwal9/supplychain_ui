{"mode": "Incremental", "template": {"$schema": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#", "contentVersion": "1.0.0.0", "parameters": {"SubscriptionID": {"type": "string", "defaultValue": "a5cc9947-7c9d-46da-8fee-9e681551fa8c"}, "TenantID": {"type": "string", "defaultValue": "e4e34038-ea1f-4882-b6e8-ccd776459ca0"}, "ClientID": {"type": "string", "defaultValue": "2eda4f44-14ff-403e-a39c-944d473d0620"}, "CientSecret": {"type": "securestring", "defaultValue": "5QSsC_YUJh_fD47E+aA=8Gg7y.4kJw52"}, "DataFactoryName": {"type": "string", "defaultValue": "supply-chain-Adf"}, "StorageAccountName": {"type": "string", "defaultValue": "supplychainsa"}, "StorageAccessKey": {"type": "securestring", "defaultValue": "oMOnFdFnls2va2IAnSbkjCejkDXUYcDy1EGSNFPM7mDKN9USst2C8e5gtmnKprtnedWHwqjiWe4ScnNuThFJcg=="}, "StorageConnectionString": {"type": "securestring", "defaultValue": "DefaultEndpointsProtocol=https;AccountName=supplychainsa;AccountKey=oMOnFdFnls2va2IAnSbkjCejkDXUYcDy1EGSNFPM7mDKN9USst2C8e5gtmnKprtnedWHwqjiWe4ScnNuThFJcg==;EndpointSuffix=core.windows.net"}, "SQLServerName": {"type": "string", "defaultValue": "supplychain-sql"}, "SQLUsername": {"type": "string", "defaultValue": "celebal"}, "SQLPassword": {"type": "securestring", "defaultValue": "password@123"}, "SQLConnectionString": {"type": "securestring", "defaultValue": "Server=tcp:supplychain-sql.database.windows.net,1433;Initial Catalog=supplychain-db;Persist Security Info=False;User ID=celebal;Password=password@123;MultipleActiveResultSets=False;Encrypt=True;TrustServerCertificate=False;Connection Timeout=30;"}, "SQLDatabaseName": {"type": "string", "defaultValue": "supplychain-db "}, "DatabricksName": {"type": "string", "defaultValue": "supplychainADS"}, "DataBricksWorkspaceURL": {"type": "string", "defaultValue": "https://centralus.azuredatabricks.net"}, "DataBricksToken": {"type": "securestring", "defaultValue": "dapid39cdf05eb01b01462a2ea42bde4d17f"}, "PowerBIEmbeddedName": {"type": "string", "defaultValue": "supplychainpbi"}, "PowerBIEmbeddedAdmin": {"type": "string", "defaultValue": "murtazabw@celebaltech.com"}, "AppServiceName": {"type": "string", "defaultValue": "SupplyChain-UI"}, "AppServiceURL": {"type": "string", "defaultValue": "https://supplychain-ui.azurewebsites.net"}, "AzureFunctionURL": {"type": "string", "defaultValue": "https://supplychain-function.azurewebsites.net/api/createschemaindwh?code=a72IEaGdP6Ti7guWMWzmjao3eBu2OmJHT79AguUEAjIwqUOrRs6lvQ=="}, "KeyVaultName": {"type": "string", "defaultValue": "supplychain-key"}, "KeyVaultLocation": {"type": "string", "defaultValue": "Central US"}, "ResourceGroupName": {"type": "string", "defaultValue": "Supply-chain-RG"}, "ResourceGroupLocation": {"type": "string", "defaultValue": "Central US"}}, "variables": {"location": "Central US", "secretsPermissions": ["Get", "List", "Set", "Delete", "Recover", "Backup", "Restore"], "keysPermissions": ["Get", "List", "Update", "Create", "Import", "Delete", "Recover", "Backup", "Restore"], "certificatesPermission": ["Get", "List", "Update", "Create", "Import", "Delete", "Recover", "Backup", "Restore", "ManageContacts", "ManageIssuers", "GetIssuers", "ListIssuers", "SetIssuers", "DeleteIssuers"], "enabledForTemplateDeployment": true, "enabledForDiskEncryption": false, "enabledForDeployment": true}, "resources": [{"type": "Microsoft.KeyVault/vaults", "name": "[parameters('KeyVaultName')]", "location": "[parameters('KeyVaultLocation')]", "apiVersion": "2018-02-14", "tags": {"displayName": "KeyVault"}, "properties": {"enabledForDeployment": "[variables('enabledForDeployment')]", "enabledForTemplateDeployment": "[variables('enabledForTemplateDeployment')]", "enabledForDiskEncryption": "[variables('enabledForDiskEncryption')]", "tenantId": "[parameters('tenantId')]", "accessPolicies": [{"objectId": "[parameters('ClientID')]", "tenantId": "[parameters('TenantID')]", "permissions": {"keys": "[variables('keysPermissions')]", "secrets": "[variables('secretsPermissions')]"}}], "sku": {"name": "Standard", "family": "A"}, "networkAcls": {"value": {"defaultAction": "Allow", "bypass": "AzureServices"}}}}, {"type": "Microsoft.KeyVault/vaults/secrets", "name": "[concat(parameters('keyVaultName'), '/','SubscriptionID')]", "apiVersion": "2018-02-14", "dependsOn": ["[concat('Microsoft.KeyVault/vaults/', parameters('keyVaultName'))]"], "properties": {"value": "[parameters('SubscriptionID')]"}}, {"type": "Microsoft.KeyVault/vaults/secrets", "name": "[concat(parameters('keyVaultName'), '/','TenantID')]", "apiVersion": "2018-02-14", "dependsOn": ["[concat('Microsoft.KeyVault/vaults/', parameters('keyVaultName'))]"], "properties": {"value": "[parameters('TenantID')]"}}, {"type": "Microsoft.KeyVault/vaults/secrets", "name": "[concat(parameters('keyVaultName'), '/','ClientID')]", "apiVersion": "2018-02-14", "dependsOn": ["[concat('Microsoft.KeyVault/vaults/', parameters('keyVaultName'))]"], "properties": {"value": "[parameters('ClientID')]"}}, {"type": "Microsoft.KeyVault/vaults/secrets", "name": "[concat(parameters('keyVaultName'), '/','CientSecret')]", "apiVersion": "2018-02-14", "dependsOn": ["[concat('Microsoft.KeyVault/vaults/', parameters('keyVaultName'))]"], "properties": {"value": "[parameters('CientSecret')]"}}, {"type": "Microsoft.KeyVault/vaults/secrets", "name": "[concat(parameters('keyVaultName'), '/','DataFactoryName')]", "apiVersion": "2018-02-14", "dependsOn": ["[concat('Microsoft.KeyVault/vaults/', parameters('keyVaultName'))]"], "properties": {"value": "[parameters('DataFactoryName')]"}}, {"type": "Microsoft.KeyVault/vaults/secrets", "name": "[concat(parameters('keyVaultName'), '/','StorageAccountName')]", "apiVersion": "2018-02-14", "dependsOn": ["[concat('Microsoft.KeyVault/vaults/', parameters('keyVaultName'))]"], "properties": {"value": "[parameters('StorageAccountName')]"}}, {"type": "Microsoft.KeyVault/vaults/secrets", "name": "[concat(parameters('keyVaultName'), '/','StorageAccessKey')]", "apiVersion": "2018-02-14", "dependsOn": ["[concat('Microsoft.KeyVault/vaults/', parameters('keyVaultName'))]"], "properties": {"value": "[parameters('StorageAccessKey')]"}}, {"type": "Microsoft.KeyVault/vaults/secrets", "name": "[concat(parameters('keyVaultName'), '/','StorageConnectionString')]", "apiVersion": "2018-02-14", "dependsOn": ["[concat('Microsoft.KeyVault/vaults/', parameters('keyVaultName'))]"], "properties": {"value": "[parameters('StorageConnectionString')]"}}, {"type": "Microsoft.KeyVault/vaults/secrets", "name": "[concat(parameters('keyVaultName'), '/','SQLServerName')]", "apiVersion": "2018-02-14", "dependsOn": ["[concat('Microsoft.KeyVault/vaults/', parameters('keyVaultName'))]"], "properties": {"value": "[parameters('SQLServerName')]"}}, {"type": "Microsoft.KeyVault/vaults/secrets", "name": "[concat(parameters('keyVaultName'), '/','SQLUsername')]", "apiVersion": "2018-02-14", "dependsOn": ["[concat('Microsoft.KeyVault/vaults/', parameters('keyVaultName'))]"], "properties": {"value": "[parameters('SQLUsername')]"}}, {"type": "Microsoft.KeyVault/vaults/secrets", "name": "[concat(parameters('keyVaultName'), '/','SQLPassword')]", "apiVersion": "2018-02-14", "dependsOn": ["[concat('Microsoft.KeyVault/vaults/', parameters('keyVaultName'))]"], "properties": {"value": "[parameters('SQLPassword')]"}}, {"type": "Microsoft.KeyVault/vaults/secrets", "name": "[concat(parameters('keyVaultName'), '/','SQLConnectionString')]", "apiVersion": "2018-02-14", "dependsOn": ["[concat('Microsoft.KeyVault/vaults/', parameters('keyVaultName'))]"], "properties": {"value": "[parameters('SQLConnectionString')]"}}, {"type": "Microsoft.KeyVault/vaults/secrets", "name": "[concat(parameters('keyVaultName'), '/','SQLDatabaseName')]", "apiVersion": "2018-02-14", "dependsOn": ["[concat('Microsoft.KeyVault/vaults/', parameters('keyVaultName'))]"], "properties": {"value": "[parameters('SQLDatabaseName')]"}}, {"type": "Microsoft.KeyVault/vaults/secrets", "name": "[concat(parameters('keyVaultName'), '/','DatabricksName')]", "apiVersion": "2018-02-14", "dependsOn": ["[concat('Microsoft.KeyVault/vaults/', parameters('keyVaultName'))]"], "properties": {"value": "[parameters('DatabricksName')]"}}, {"type": "Microsoft.KeyVault/vaults/secrets", "name": "[concat(parameters('keyVaultName'), '/','DataBricksWorkspaceURL')]", "apiVersion": "2018-02-14", "dependsOn": ["[concat('Microsoft.KeyVault/vaults/', parameters('keyVaultName'))]"], "properties": {"value": "[parameters('DataBricksWorkspaceURL')]"}}, {"type": "Microsoft.KeyVault/vaults/secrets", "name": "[concat(parameters('keyVaultName'), '/','DataBricksToken')]", "apiVersion": "2018-02-14", "dependsOn": ["[concat('Microsoft.KeyVault/vaults/', parameters('keyVaultName'))]"], "properties": {"value": "[parameters('DataBricksToken')]"}}, {"type": "Microsoft.KeyVault/vaults/secrets", "name": "[concat(parameters('keyVaultName'), '/','PowerBIEmbeddedName')]", "apiVersion": "2018-02-14", "dependsOn": ["[concat('Microsoft.KeyVault/vaults/', parameters('keyVaultName'))]"], "properties": {"value": "[parameters('PowerBIEmbeddedName')]"}}, {"type": "Microsoft.KeyVault/vaults/secrets", "name": "[concat(parameters('keyVaultName'), '/','PowerBIEmbeddedAdmin')]", "apiVersion": "2018-02-14", "dependsOn": ["[concat('Microsoft.KeyVault/vaults/', parameters('keyVaultName'))]"], "properties": {"value": "[parameters('PowerBIEmbeddedAdmin')]"}}, {"type": "Microsoft.KeyVault/vaults/secrets", "name": "[concat(parameters('keyVaultName'), '/','AppServiceName')]", "apiVersion": "2018-02-14", "dependsOn": ["[concat('Microsoft.KeyVault/vaults/', parameters('keyVaultName'))]"], "properties": {"value": "[parameters('AppServiceName')]"}}, {"type": "Microsoft.KeyVault/vaults/secrets", "name": "[concat(parameters('keyVaultName'), '/','AppServiceURL')]", "apiVersion": "2018-02-14", "dependsOn": ["[concat('Microsoft.KeyVault/vaults/', parameters('keyVaultName'))]"], "properties": {"value": "[parameters('AppServiceURL')]"}}, {"type": "Microsoft.KeyVault/vaults/secrets", "name": "[concat(parameters('keyVaultName'), '/','AzureFunctionURL')]", "apiVersion": "2018-02-14", "dependsOn": ["[concat('Microsoft.KeyVault/vaults/', parameters('keyVaultName'))]"], "properties": {"value": "[parameters('AzureFunctionURL')]"}}, {"type": "Microsoft.KeyVault/vaults/secrets", "name": "[concat(parameters('keyVaultName'), '/','ResourceGroupName')]", "apiVersion": "2018-02-14", "dependsOn": ["[concat('Microsoft.KeyVault/vaults/', parameters('keyVaultName'))]"], "properties": {"value": "[parameters('ResourceGroupName')]"}}, {"type": "Microsoft.KeyVault/vaults/secrets", "name": "[concat(parameters('keyVaultName'), '/','ResourceGroupLocation')]", "apiVersion": "2018-02-14", "dependsOn": ["[concat('Microsoft.KeyVault/vaults/', parameters('keyVaultName'))]"], "properties": {"value": "[parameters('ResourceGroupLocation')]"}}]}, "parameters": {"SubscriptionID": {"value": "ced02871-aa05-4c63-8bf2-9cf01ce6db2d"}, "TenantID": {"value": "e4e34038-ea1f-4882-b6e8-ccd776459ca0"}, "ClientID": {"value": "bb624626-5de0-4644-b88a-562610cb50fa"}, "CientSecret": {"value": "4B6CAERi3Cka7Ku]KikbuIFvSQ@AtZ-*"}, "DataFactoryName": {"value": "sca-azdftest"}, "StorageAccountName": {"value": "scaazstoreacctest"}, "StorageAccessKey": {"value": "2WDw70fBbJH7XXX0T3nuLqLKOZ+t/b5ahRESfJ7e7qGHZ8/DD0z4q92pygKr5/hdoiF1nSfA7a73OcxueYJgWw=="}, "StorageConnectionString": {"value": "DefaultEndpointsProtocol=https;AccountName=scaazstoreacctest;AccountKey=2WDw70fBbJH7XXX0T3nuLqLKOZ+t/b5ahRESfJ7e7qGHZ8/DD0z4q92pygKr5/hdoiF1nSfA7a73OcxueYJgWw==;EndpointSuffix=core.windows.net"}, "SQLServerName": {"value": "scaazsqltest"}, "SQLUsername": {"value": "celebal"}, "SQLPassword": {"value": "Password@123"}, "SQLConnectionString": {"value": "Server=tcp:scaazsqltest.database.windows.net,1433;Initial Catalog=sca-azdb;Persist Security Info=False;User ID=celebal;Password=Password@123;MultipleActiveResultSets=False;Encrypt=True;TrustServerCertificate=False;Connection Timeout=30;"}, "SQLDatabaseName": {"value": "sca-azdb"}, "DatabricksName": {"value": "sca-data-bricks"}, "DataBricksWorkspaceURL": {"value": "https://centralus.azuredatabricks.net/"}, "DataBricksToken": {"value": "dapi6576e4d0c1699deddab1cb8a4945c85e"}, "PowerBIEmbeddedName": {"value": "scaazpbitest"}, "PowerBIEmbeddedAdmin": {"value": "murtazabw@celebaltech.com"}, "AppServiceName": {"value": "sca-az-ui-test"}, "AppServiceURL": {"value": "https://sca-az-ui-test.azurewebsites.net"}, "AzureFunctionURL": {"value": "https://sca-azfunctiontest.azurewebsites.net/api/createschemaindwh?code=iEX7BhM8DCgcarGwsJamx1NSBrgjeXaOP5F34plHptsh8TWcxHQMSA=="}, "KeyVaultName": {"value": "keyvaultuitest"}, "KeyVaultLocation": {"value": "Central US"}, "ResourceGroupName": {"value": "SupplyChainUITest"}, "ResourceGroupLocation": {"value": "Central US"}}}